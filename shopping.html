<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</title>
    <meta name="description" content="–ë—ã—Å—Ç—Ä—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π">
    <meta name="theme-color" content="#667eea">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="styles.css">
    <script defer src="rooms.js"></script>
    <script defer src="shopping.js"></script>
    <style>
        .header-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: white;
            box-shadow: 0 4px 18px rgba(102, 126, 234, 0.35);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }
        .header-gradient::after {
            content: '';
            position: absolute;
            inset: 12px;
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.2);
            pointer-events: none;
        }
        .header-gradient h1,
        .header-gradient p {
            position: relative;
            z-index: 1;
        }
        .header-gradient p { color: rgba(255,255,255,0.92); }
        .shopping-item { transition: transform 0.2s ease, opacity 0.2s ease; }
        .shopping-item.swiped { transform: translateX(60px); opacity: 0.4; }
        .catalog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.75rem;
        }
        .catalog-card {
            border-radius: 14px;
            border: 1px solid #e5e7eb;
            background: #fff;
            padding: 0.65rem 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
            box-shadow: 0 1px 2px rgba(15,23,42,0.08);
        }
        .catalog-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #1f2937;
            line-height: 1.2;
            max-height: 2.4em;
            overflow: hidden;
        }
        .catalog-meta {
            font-size: 0.75rem;
            color: #6b7280;
        }
        .catalog-card button {
            margin-top: auto;
            font-size: 0.78rem;
            padding: 4px 10px;
        }
        @media (min-width: 1024px) {
            .shopping-two-col { display: grid; grid-template-columns: 1.8fr 1.1fr; gap: 1rem; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen py-6 px-4">
    <div class="max-w-6xl mx-auto space-y-4">
        <header class="header-gradient text-center rounded-2xl p-6 shadow-lg">
            <h1 class="text-2xl md:text-3xl font-semibold mb-2">üõçÔ∏è –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h1>
            <p class="text-white/90 text-sm max-w-2xl mx-auto">–î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–≤–∞—Ä—ã –∑–∞ —Å–µ–∫—É–Ω–¥—ã, –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —à–∞–±–ª–æ–Ω–∞–º–∏ –∏ –¥–µ–ª–∏—Ç–µ—Å—å –æ–±—â–∏–º —Å–ø–∏—Å–∫–æ–º —Å —Å–µ–º—å—ë–π</p>
            <div class="mt-4 grid grid-cols-2 max-w-lg mx-auto gap-3 text-sm font-medium">
                <a href="index.html" class="px-6 py-3 rounded-2xl bg-white/20 text-white border border-white/30 shadow-inner flex items-center justify-center gap-2 transition">
                    üìä –ë—é–¥–∂–µ—Ç
                </a>
                <a href="shopping.html" class="px-6 py-3 rounded-2xl bg-white text-blue-600 shadow flex items-center justify-center gap-2">
                    üõçÔ∏è –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫
                </a>
            </div>
        </header>

        <div id="roomInfo" class="hidden mb-4 p-4 bg-white rounded-xl border border-gray-200 flex flex-wrap items-center justify-between gap-3">
            <div>
                <div class="text-xs text-gray-500">–ö–æ–º–Ω–∞—Ç–∞</div>
                <div id="currentRoomId" class="font-mono font-medium text-gray-800"></div>
                <div class="text-xs text-gray-500 mt-1">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <span id="currentUserName" class="font-medium"></span></div>
            </div>
            <div class="flex gap-2">
                <button onclick="roomsManager.copyRoomLink()" class="btn-secondary px-3 py-2 rounded-lg text-sm font-medium">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                <button onclick="roomsManager.leaveRoom()" class="px-4 py-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg text-sm font-medium transition-colors">–í—ã–π—Ç–∏</button>
            </div>
        </div>

        <section class="shopping-two-col">
            <div class="space-y-4">
                <div class="card p-4 space-y-3">
                    <h2 class="text-lg font-semibold text-gray-800 flex items-center gap-2">‚ö° –ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ</h2>
                    <div class="grid md:grid-cols-4 gap-3">
                        <input id="itemName" type="text" class="input-field" placeholder="–ß—Ç–æ –∫—É–ø–∏—Ç—å">
                        <input id="itemQuantity" type="text" class="input-field" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2 —à—Ç)">
                        <input id="itemCategory" type="text" class="input-field" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è (–ü—Ä–æ–¥—É–∫—Ç—ã)">
                        <button type="button" class="btn-primary rounded-lg" onclick="handleAddItem()">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                    <div id="quickChips" class="flex flex-wrap gap-2 text-sm"></div>
                </div>

                <div class="card p-4 space-y-3">
                    <div class="flex items-center justify-between">
                        <h2 class="text-lg font-semibold text-gray-800">üìã –ê–∫—Ç–∏–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫</h2>
                        <div class="flex gap-2 text-xs text-gray-500">
                            <span>–í—Å–µ–≥–æ: <span id="statTotal" class="font-semibold text-gray-700">0</span></span>
                            <span>–ê–∫—Ç–∏–≤–Ω–æ: <span id="statActive" class="font-semibold text-blue-600">0</span></span>
                            <span>–ö—É–ø–ª–µ–Ω–æ: <span id="statDone" class="font-semibold text-green-600">0</span></span>
                        </div>
                    </div>
                    <div id="categoryFilterChips" class="flex flex-wrap gap-2"></div>
                    <div id="itemsList" class="space-y-2"></div>
                    <button class="btn-secondary w-full rounded-lg" onclick="clearList()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                </div>

                <div class="card p-4 space-y-3">
                    <h2 class="text-lg font-semibold text-gray-800">üïí –û—Ç–º–µ—Ç–∫–∏</h2>
                    <p class="text-sm —Ç–µ–∫—Å—Ç-gray-600">–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –ø–æ –ø–æ–∑–∏—Ü–∏–∏ –≤–ø—Ä–∞–≤–æ, —á—Ç–æ–±—ã –æ—Ç–º–µ—Ç–∏—Ç—å –ø–æ–∫—É–ø–∫—É. –ù–∞–∂–º–∏—Ç–µ –µ—â—ë —Ä–∞–∑, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –≤ –∞–∫—Ç–∏–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫.</p>
                </div>
            </div>

            <div class="space-y-4">
                <div class="card p-4 space-y-3">
                    <h2 class="text-lg font-semibold text-gray-800">üìö –ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã</h2>
                    <div class="catalog-grid" id="catalogGrid"></div>
                </div>

                <div class="card –ø-4 space-y-3">
                    <h2 class="text-lg font-semibold text-gray-800">‚≠ê –í–∞—à–∏ —à–∞–±–ª–æ–Ω—ã</h2>
                    <div id="manualTemplates" class="flex flex-wrap gap-2 text-sm"></div>
                </div>

                <div class="card p-4 space-y-3">
                    <h2 class="text-lg font-semibold text-gray-800">üèÖ –¢–æ–ø –ø–æ–∫—É–ø–æ–∫</h2>
                    <div id="topItemsList" class="space-y-2 text-sm"></div>
                </div>

                <div class="card –ø-4 space-y-3">
                    <h2 class="text-lg font-semibold text-gray-800">üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                    <div id="categoriesList" class="space-y-2 text-sm"></div>
                </div>

                <div class="card –ø-4 space-y-3 –°–≤">
                    <h2 class="text-lg font-semibold text-gray-800">‚úàÔ∏è –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–ø–∏—Å–∫–∞</h2>
                    <p class="text-sm text-gray-500">–°–ø–∏—Å–æ–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è –≤ Telegram, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–æ—Ç.</p>
                    <button class="btn-primary w-full rounded-lg" onclick="sendTelegramList()">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫</button>
                    <div id="telegramStatus" class="text-xs text-gray-500"></div>
                </div>
            </div>
        </section>

        <section class="card p-4 space-y-3">
            <details open>
                <summary class="text-lg font-semibold text-gray-800 cursor-pointer">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ø–∏—Å–∫–∞</summary>
                <div class="grid md:grid-cols-2 gap-4 mt-3">
                    <div class="space-y-2">
                        <label class="text-xs text-gray-500">Telegram Bot Token</label>
                        <input id="settingsTelegramToken" type="password" class="input-field" placeholder="123456:ABC...">
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs text-gray-500">Chat ID</label>
                        <input id="settingsTelegramChatId" type="text" class="input-field" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 123456 –∏–ª–∏ @channel">
                    </div>
                </div>
                <div class="flex gap-2 mt-3">
                    <button class="btn-primary rounded-lg px-4 py-2" onclick="saveTelegramSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="btn-secondary rounded-lg px-4 py-2" onclick="testTelegramSettings()">üß™ –¢–µ—Å—Ç</button>
                </div>
            </details>
        </section>
    </div>
</body>
</html>
